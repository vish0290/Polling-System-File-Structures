<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <script type="text/javascript" src="/eel.js"></script>"
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>last</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto&amp;display=swap">
    <link rel="stylesheet" href="assets/fonts/fontawesome-all.min.css">
    <link rel="stylesheet" href="assets/css/styles.css">
</head>

<body style="background: linear-gradient(90deg, rgb(0,57,115) 0%, rgb(93,72,153) 100%);">
    <nav class="navbar navbar-light navbar-expand-md" style="background: rgba(255,255,255,0.16);color: rgb(255,255,255);">
        <div class="container-fluid"><a class="navbar-brand" href="#" style="color: #ffffff;">The Choosen One</a><button data-bs-toggle="collapse" class="navbar-toggler"
                data-bs-target="#navcol-1"><span class="visually-hidden">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navcol-1" style="padding-top: 12px;">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="voterdash.html" style="color: #ffffff;">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="castvote.html" style="color: #ffffff;">Cast Vote</a></li>
                    <li class="nav-item"><a class="nav-link" href="winner.html" style="color: #ffffff;">Winner</a></li>
                    <li class="nav-item"><a class="nav-link" href="profile_voter.html" style="color: #ffffff;">Profile</a></li>
                    <li class="nav-item"><a class="nav-link" href="login.html" style="color: #ffffff;border-radius: 0px;background: rgba(255,255,255,0);"><i class="fas fa-sign-out-alt" style="border-radius: 10px;border-width: 0px;border-style: solid;background: #ffffff;color: rgb(0,0,0);font-size: 20px;padding: 5px;"></i></a></li>
                </ul>
            </div>
        </div>
    </nav>
    <section id="main-parent" style="margin-top: 20px;padding: 60px;">


    </section>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script>
        function voting() {
            eel.display_teams()(function (mes) {
                //alert(mes)
                let names = []
                let candiid =[]
                count = mes.length
                for (let i = 0; i < count; i++) {
                    let data = mes[i].split("|")
                    names.push(data[2])
                    candiid.push(data[0])
                }
                alert(names)

                let parent = document.getElementById("main-parent")
                for (let i = 0; i < names.length; i++) {

                    let innerParent = document.createElement("div")
                    innerParent.className = "d-flex flex-row justify-content-between"
                    innerParent.style.padding = "11px"
                    innerParent.style.background = "rgba(255,255,255,0.15)"
                    innerParent.style.borderRadius = "23px"
                    innerParent.style.marginTop = "23px"

                    let h2Ele = document.createElement("h2")
                    h2Ele.style.color = "rgb(255,255,255)"
                    h2Ele.innerHTML = `${names[i]}`
                    innerParent.appendChild(h2Ele)

                    let btnEle = document.createElement("button")
                    btnEle.id = `${i}`
                    btnEle.className = "btn btn-primary"
                    btnEle.style.borderRadius = "10px"
                    btnEle.style.background = "rgba(255,255,255,0.48)"
                    btnEle.style.color = "rgb(0,0,0)"
                    btnEle.style.fontSize = "17px"
                    btnEle.style.fontWeight = "bold"
                    btnEle.style.fontFamily = "Roboto, sans-serif"
                    btnEle.innerHTML = "vote"
                    btnEle.style.marginLeft = "50px"


                    innerParent.appendChild(btnEle)

                    parent.appendChild(innerParent)

                    document.getElementById(`${i}`).addEventListener("click", function(event){
                        let cid = candiid[i]
                        let vid = localStorage.getItem("userid")
                        eel.cast_vote(cid,vid)(function(mes){
                            alert(mes)
                        })
                })
                }

                


            })
        }

        voting()
    </script>
</body>

</html>